{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Overall Results</title>
    <!-- Fontawesom Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- ======= Styles ====== -->
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
    <style>
    /* Styling the dropdown */
    select {
        padding: 8px;
        font-size: 16px;
        border-radius: 5px;
        border: 1px solid #ccc;
        cursor: pointer;
    }

    /* Styling the table */
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        border-radius: 10px;
        overflow: hidden;
    }

    th, td {
        padding: 12px;
        text-align: center;
        border: 1px solid #ddd;
    }

    th {
        background-color: #007bff;
        color: white;
        font-weight: bold;
    }

    /* Alternating row colors */
    tbody tr:nth-child(odd) {
        background-color: #f9f9f9;
    }

    tbody tr:nth-child(even) {
        background-color: #eef2ff;
    }

    /* Hover effect */
    tbody tr:hover {
        background-color: #d6e4ff;
        transition: 0.3s;
    }

    /* Centering the table */
    .table-container {
        width: 90%;
        margin: auto;
        overflow-x: auto;
    }

    /* Responsive table */
    @media (max-width: 768px) {
        th, td {
            font-size: 14px;
            padding: 8px;
        }
    }
</style>
</head>

<body>
    <!-- =============== Navigation ================ -->
    <div class="container">
        <div class="navigation">
            <ul>
                <li>
                    <a href="#">
                        <span class="icon">
                            <i class="fa fa-pie-chart"></i>
                        </span>
                        <span class="title brand"> Matumaini School</span>
                    </a>
                </li>

                <li>
                    <a href="{% url 'dashboard' %}">
                        <span class="icon">
                            <i class="fa-solid fa-gauge"></i>
                        </span>
                        <span class="title">Admin Dashboard</span>
                    </a>
                </li>

                <li>
                    <a href="{% url 'steachers' %}">
                        <span class="icon">
                            <i class="fa-solid fa-person"></i>
                        </span>
                        <span class="title">Add Teacher</span>
                    </a>
                </li>

                <li>
                    <a href="{% url 'sstudents' %}">
                        <span class="icon">
                            <i class="fa-solid fa-child"></i>
                        </span>
                        <span class="title">Add Students</span>
                    </a>
                </li>

               
                <li>
                    <a href="{% url 'sattendance' %}">
                        <span class="icon">
                            <i class="fa-solid fa-clipboard-user"></i>
                        </span>
                        <span class="title">Timetable</span>
                    </a>
                </li>

    

                <li>
                    <a href="{% url 'sresult' %}">
                        <span class="icon">
                            <i class="fa-solid fa-square-poll-vertical"></i>
                        </span>
                        <span class="title">Results</span>
                    </a>
                </li>

                <li>
                    <a href="{% url 'sadminFee' %}">
                        <span class="icon">
                            <i class="fa-solid fa-sack-dollar"></i>
                        </span>
                        <span class="title">Fees</span>
                    </a>
                </li>

                <li>
                    <a href="{% url 'logoutz' %}">
                        <span class="icon">
                            <i class="fa-solid fa-right-from-bracket"></i>
                        </span>
                        <span class="title">Sign Out</span>
                    </a>
                </li>
            </ul>
        </div>

        <!-- ========================= Main ==================== -->
        <div class="main" id="results">
            <div class="topbar">
                <div class="toggle">
                    <i class="fa-solid fa-list"></i>
                </div>

                <div class="search">
                    <label>
                        <input type="text" placeholder="Search here">
                        <ion-icon name="search-outline"></ion-icon>
                    </label>
                </div>

                <div class="user">
                    <img src="{% static 'images/dp.jpg' %}" alt="Bus Image">
                </div>
            </div>

<form method="GET" action="">
    <label for="class_name">Select Class:</label>
    <select name="class_name" id="class_name" onchange="this.form.submit()">
        <option value="">-- Choose Class --</option>
        <option value="Form 1 Red" {% if class_selected == "Form 1 Red" %}selected{% endif %}>Form 1 Red</option>
        <option value="Form 1 Blue" {% if class_selected == "Form 1 Blue" %}selected{% endif %}>Form 1 Blue</option>
        <option value="Form 1 Yellow" {% if class_selected == "Form 1 Yellow" %}selected{% endif %}>Form 1 Yellow</option>
        <option value="Form 2 Red" {% if class_selected == "Form 2 Red" %}selected{% endif %}>Form 2 Red</option>
        <option value="Form 2 Blue" {% if class_selected == "Form 2 Blue" %}selected{% endif %}>Form 2 Blue</option>
        <option value="Form 2 Yellow" {% if class_selected == "Form 2 Yellow" %}selected{% endif %}>Form 2 Yellow</option>
        <option value="Form 3 Red" {% if class_selected == "Form 3 Red" %}selected{% endif %}>Form 3 Red</option>
        <option value="Form 3 Blue" {% if class_selected == "Form 3 Blue" %}selected{% endif %}>Form 3 Blue</option>
        <option value="Form 3 Yellow" {% if class_selected == "Form 3 Yellow" %}selected{% endif %}>Form 3 Yellow</option>
        <option value="Form 4 Red" {% if class_selected == "Form 4 Red" %}selected{% endif %}>Form 4 Red</option>
        <option value="Form 4 Blue" {% if class_selected == "Form 4 Blue" %}selected{% endif %}>Form 4 Blue</option>
        <option value="Form 4 Yellow" {% if class_selected == "Form 4 Yellow" %}selected{% endif %}>Form 4 Yellow</option>
    </select>
</form>

{% if students %}
    <div class="table-container">
    <table>
        <thead>
            <tr>
                <th>Student Name</th>
                <th>Registration Number</th>
                <th>Biology</th>
                <th>History</th>
                <th>Geography</th>
                <th>Maths</th>
                <th>English</th>
                <th>Kiswahili</th>
                <th>Chemistry</th>
                <th>Physics</th>
                <th>Computer</th>
                <th>Agriculture</th>
                <th>Business</th>
            </tr>
        </thead>
        <tbody>
            {% for student in students %}
            <tr>
                <td>{{ student.name }}</td>
                <td>{{ student.reg_number }}</td>
                <td>{{ student.subjects.Biology|default:"-" }}</td>
                <td>{{ student.subjects.History|default:"-" }}</td>
                <td>{{ student.subjects.Geography|default:"-" }}</td>
                <td>{{ student.subjects.Maths|default:"-" }}</td>
                <td>{{ student.subjects.English|default:"-" }}</td>
                <td>{{ student.subjects.Kiswahili|default:"-" }}</td>
                <td>{{ student.subjects.Chemistry|default:"-" }}</td>
                <td>{{ student.subjects.Physics|default:"-" }}</td>
                <td>{{ student.subjects.Computer|default:"-" }}</td>
                <td>{{ student.subjects.Agriculture|default:"-" }}</td>
                <td>{{ student.subjects.Business|default:"-" }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
    <p>No students found for this class.</p>
{% endif %}

        </div>
    </div>

    <!-- Scripts -->
    <script src="assets/js/main.js"></script>
</body>

</html>